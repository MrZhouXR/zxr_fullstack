# 传输层: UDP TCP

# udp 协议
udp 协议是面向无对象的，也就是说不需要在正式传递数据之前就连接双方
udp 只负责数据包的搬运，不保证数据包的有序或丢失

  - 面向无对象
    不需要三次握手

  - 缺点：
    1. 不可靠性
      - 无连接 
      - 不解析数据
      - 没有拥塞控制

  - 优点： 
    1. 高效性
      - 不需要保证数据不会丢失且有序
      - 头部开销小，只有八字节，而 TCP 至少二十个字节

  - 传输方式
    1. 一对一
    2. 一对多
    3. 多对多
    4. 多对一


# 应用层
发送端： 浏览器（数据）  =》  传输层（UDP）  =》 网络层
接收端： 网络层  =》  传输层   =》  应用层


# TCP 协议
  要建立连接，传输过程有各种算法保证数据的可靠性，没有UDP高效

  - 三次握手
    1. 客户端向服务端发送连接请求
    2. 服务端向客户端响应请求
    3. 客户端接收到响应后，向服务端发送确认报文（确认建立了连接）

  - 为什么TCP建立连接需要三次握手？明明两次就可以建立连接
    1. 如果两次握手就建立连接：
        客户端发送连接请求，因为网络问题没有到达服务端，那么TCP会启动超时重传机制，重新发一个请求B，当B顺利到达服务端后，
    建立了连接，当数据传输完后连接断开，这时候A才来到了服务端，服务端就会认为客户端又想建立连接，于是服务端给与相应，但是此时客户端已经关闭，服务端会一直等待，造成资源浪费。

    2. 这时候第三次握手就起作用了，第三次握手能控制与客户端的连接状态，以免造成资源浪费。

  - 四次挥手
    1. 客户端向服务端发送释放连接请求
    2. 服务端接收到释放请求，会告诉应用层要释放TCP连接，就会发送ACK包，并进入CLOSE_wait状态（第二次挥手之后客户端不能向服务端发数据了，但是服务端还可以向客户端发送数据）
    3. 如果服务端有数据没传完，服务端会继续把这最后一次传完到客户端
    4. 客户端接收到最后一次数据后向服务端发起确认断开请求，2ms后如果没有接收到服务端的响应，就会自动断开；


